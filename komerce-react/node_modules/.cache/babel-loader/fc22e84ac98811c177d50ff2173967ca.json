{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Downloads\\\\Komerce-Ecomerce-main\\\\komerce-react\\\\src\\\\pages\\\\register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport AuthContext from \"../context/authContext\";\nimport * as ROUTES from '../constants/routes';\nimport '../css/style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n\n  const history = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordConfirm, setPasswordConfirm] = useState('');\n  const [error, setError] = useState('');\n\n  const registerHandler = async event => {\n    event.preventDefault(); // console.log(email, password, passwordConfirm);\n\n    await fetch('http://localhost:3000/users/signup', {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password,\n        passwordConfirm: passwordConfirm\n      })\n    }).then(res => {\n      // console.log(res.json())\n      if (res.ok) {\n        toast.success(\"Registered Successfully!\", {\n          position: toast.POSITION.TOP_CENTER\n        });\n        return res.json();\n      } else {\n        return res.json().then(data => {\n          console.log(data.status);\n\n          if ('email' in data.status && 'password' in data.status && 'passwordConfirm' in data.status) {\n            throw new Error(\"Please provide email, password & confirmPassword\"); // console.log(true)\n          } else if ('password' in data.status && 'passwordConfirm' in data.status) {\n            if (data.status.password.kind === \"minlength\") {\n              setPassword('');\n              throw new Error(data.status.password.message);\n            } else {\n              throw new Error(\"Please provide password & confirmPassword\");\n            }\n          } else if ('passwordConfirm' in data.status) {\n            setPasswordConfirm('');\n            throw new Error(data.status.passwordConfirm.message);\n          } else {\n            throw new Error(\"Others\");\n          }\n        });\n      }\n    }).then(() => {\n      history(ROUTES.LOGIN);\n    }).catch(err => {\n      // console.log(err)\n      // if(err.message === \"Passwords not matched!\" || err.message === \"Password must be at least 8 characters\"){\n      // \tsetPassword('');\n      // \tsetPasswordConfirm('');\n      // }\n      // setError(err.message)   \n      // if(err.message === \"Passwords not matched!\")       \n      toast.error(err.message, {\n        position: toast.POSITION.TOP_CENTER\n      });\n    });\n  };\n\n  useEffect(() => {\n    document.title = \"Login\";\n  });\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-container sign-up-container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        action: \"#\",\n        onSubmit: registerHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Create Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-control\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            children: \"Email Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"\",\n            value: email,\n            onChange: _ref => {\n              let {\n                target\n              } = _ref;\n              return setEmail(target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-control\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            children: \"Enter Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"\",\n            value: password,\n            onChange: _ref2 => {\n              let {\n                target\n              } = _ref2;\n              return setPassword(target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-control\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            children: \"Confirm Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"\",\n            value: passwordConfirm,\n            onChange: _ref3 => {\n              let {\n                target\n              } = _ref3;\n              return setPasswordConfirm(target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button checkout_btn button--hollow\",\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Register, \"FPFXOAZqoaFVwPR8XcfZWEz1h1A=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["C:/Users/Admin/Downloads/Komerce-Ecomerce-main/komerce-react/src/pages/register.js"],"names":["React","useState","useEffect","useNavigate","ToastContainer","toast","AuthContext","ROUTES","Register","history","email","setEmail","password","setPassword","passwordConfirm","setPasswordConfirm","error","setError","registerHandler","event","preventDefault","fetch","method","credentials","headers","body","JSON","stringify","then","res","ok","success","position","POSITION","TOP_CENTER","json","data","console","log","status","Error","kind","message","LOGIN","catch","err","document","title","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport AuthContext from \"../context/authContext\";\nimport * as ROUTES from '../constants/routes';\nimport '../css/style.css';\n\nexport default function Register(){\n\tconst history = useNavigate();\n\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [passwordConfirm, setPasswordConfirm] = useState('');\n\tconst [error, setError] = useState('');\n\t\n\tconst registerHandler = async(event) => {\n\t\tevent.preventDefault();\n\t\t// console.log(email, password, passwordConfirm);\n\n\t\tawait fetch('http://localhost:3000/users/signup',{\n            method: 'POST',\n\t\t\tcredentials: 'include',\n            headers: {\n                'Accept' : 'application/json',\n                'Content-Type' : 'application/json',\n            },\n            body: JSON.stringify({\n                email: email,\n                password: password,\n\t\t\t\tpasswordConfirm: passwordConfirm\n            })\n        }).then(res => {\n\t\t\t// console.log(res.json())\n\t\t\tif(res.ok){\n\t\t\t\ttoast.success(\"Registered Successfully!\", {position: toast.POSITION.TOP_CENTER}) \n                return res.json();\n            }else{\n                return res.json().then((data) => {\n                    console.log(data.status)\n\t\t\t\t\tif('email'in data.status && 'password'in data.status && 'passwordConfirm'in data.status){\n\t\t\t\t\t\tthrow new Error(\"Please provide email, password & confirmPassword\");\n\t\t\t\t\t\t// console.log(true)\n\t\t\t\t\t}else if('password'in data.status && 'passwordConfirm'in data.status){\n\t\t\t\t\t\tif(data.status.password.kind === \"minlength\"){\n\t\t\t\t\t\t\tsetPassword('');\n\t\t\t\t\t\t\tthrow new Error(data.status.password.message);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthrow new Error(\"Please provide password & confirmPassword\");\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}else if('passwordConfirm'in data.status){\n\t\t\t\t\t\tsetPasswordConfirm('')\n\t\t\t\t\t\tthrow new Error(data.status.passwordConfirm.message);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthrow new Error(\"Others\");\n\t\t\t\t\t}\n                });\n            }\n\t\t}).then(() => {\n\t\t\thistory(ROUTES.LOGIN)\n\t\t}).catch((err) => {\n            // console.log(err)\n\t\t\t// if(err.message === \"Passwords not matched!\" || err.message === \"Password must be at least 8 characters\"){\n\t\t\t// \tsetPassword('');\n\t\t\t// \tsetPasswordConfirm('');\n\t\t\t// }\n            // setError(err.message)   \n\t\t\t// if(err.message === \"Passwords not matched!\")       \n\t\t\ttoast.error(err.message, {position: toast.POSITION.TOP_CENTER}) \n        })\n\t}\n\n\tuseEffect(() => {\n        document.title = \"Login\";\n    });\n\n    return(\n        <section>\n\t\t\t<div className=\"form-container sign-up-container\">\n\t            <form action=\"#\" onSubmit={registerHandler}>\n\t                <h1>Create Account</h1>\n\t                <div className=\"form-control\">\n\t                \t<label htmlFor=\"name\">Email Address</label>\n\t                \t<input \n\t\t\t\t\t\t\ttype=\"email\" \n\t\t\t\t\t\t\tplaceholder=\"\" \n\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\tonChange={({ target }) => setEmail(target.value)}\n\t\t\t\t\t\t/>\n\t                </div>\n\t                <div className=\"form-control\">\n\t                \t<label htmlFor=\"name\">Enter Password</label>\n\t                \t<input \n\t\t\t\t\t\t\ttype=\"password\" \n\t\t\t\t\t\t\tplaceholder=\"\" \n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\tonChange={({ target }) => setPassword(target.value)}\n\t\t\t\t\t\t/>\n\t                </div>\n\t                <div className=\"form-control\">\n\t                \t<label htmlFor=\"name\">Confirm Password</label>\n\t                \t<input \n\t\t\t\t\t\t\ttype=\"password\" \n\t\t\t\t\t\t\tplaceholder=\"\" \n\t\t\t\t\t\t\tvalue={passwordConfirm}\n\t\t\t\t\t\t\tonChange={({ target }) => setPasswordConfirm(target.value)}\n\t\t\t\t\t\t/>\n\t                </div>\n\t\t\t\t\t{/* {error && <p className=\"error-message\">{error}</p>} */}\n\t\t\t\t\t{/* <ToastContainer className=\"toaster-style\"/> */}\n\t                <button className=\"button checkout_btn button--hollow\">Sign Up</button>\n\t            </form>\n\t        </div>\n\t\t</section>\n    )\n}"]},"metadata":{},"sourceType":"module"}