{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Downloads\\\\Komerce-Ecomerce-main\\\\komerce-react\\\\src\\\\components\\\\user\\\\checkout.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useStripe } from '@stripe/react-stripe-js';\nimport validator from \"validator\";\nimport axios from \"axios\";\nimport AuthContext from '../../context/authContext';\nimport * as ROUTES from '../../constants/routes';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Checkout() {\n  _s();\n\n  const history = useNavigate();\n  const stripe = useStripe();\n  const authCtx = useContext(AuthContext);\n  const isAuth = authCtx.isAuth;\n  const [orderId, setOrderId] = useState(''); // console.log(orderId)\n\n  const [cartData, setCartData] = useState([]);\n  const [discountData, setDiscountData] = useState([]);\n  const [orderData, setOrderData] = useState([]);\n  const [order, setOrders] = useState([]);\n  const [orderNo, setOrderNo] = useState('');\n  const [existingCartItems, setExistingCartItems] = useState([]);\n  const [userData, setUserData] = useState([]);\n  const [error, setError] = useState('');\n  let discountedAmount;\n  let orderStart = 0;\n  const [billingAddress, setBillingAddress] = useState({\n    name: '',\n    email: '',\n    phone: '',\n    address: '',\n    postal_code: ''\n  });\n  const [shippingAddress, setShippingAddress] = useState({\n    name: '',\n    email: '',\n    phone: '',\n    address: '',\n    postal_code: ''\n  });\n  const isInvalid = billingAddress.name === '' || billingAddress.email === '' || billingAddress.phone === '' || billingAddress.address === '' || billingAddress.postal_code === '' || shippingAddress.name === '' || shippingAddress.email === '' || shippingAddress.phone === '' || shippingAddress.address === '' || shippingAddress.postal_code === '';\n\n  const fetchCartData = async () => {\n    const result = await fetch(`http://localhost:3000/carts/${authCtx.cartId}`);\n    const data = await result.json();\n    const newData = data.data.cart;\n    const eData = newData.existingItem;\n    setCartData(newData);\n    setExistingCartItems(eData);\n    setOrderId(authCtx.orderId);\n  };\n\n  const fetchDiscountData = async () => {\n    const result = await fetch('http://localhost:3000/discounts');\n    const data = await result.json();\n    setDiscountData(data.data.discounts);\n  };\n\n  const fetchOrderData = async () => {\n    console.log(\"Entered\");\n    const result = await fetch(`http://localhost:3000/orders/${authCtx.orderId}`);\n    const data = await result.json();\n    setOrderData(data.data.order);\n    const billingData = data.data.order.billing_address;\n    const shippingData = data.data.order.shipping_address;\n    setBillingAddress({\n      name: billingData.name,\n      email: billingData.email,\n      phone: billingData.phone,\n      address: billingData.address,\n      postal_code: billingData.postal_code\n    });\n    setShippingAddress({\n      name: shippingData.name,\n      email: shippingData.email,\n      phone: shippingData.phone,\n      address: shippingData.address,\n      postal_code: shippingData.postal_code\n    }); // setOrderNo(data.data.order.order_no)\n  };\n\n  const fetchUserData = async () => {\n    const result = await fetch(`http://localhost:3000/users/${authCtx.userId}`);\n    const data = await result.json();\n    setUserData(data.data.user);\n  };\n\n  const fetchOrders = async () => {\n    const result = await fetch(\"http://localhost:3000/orders\");\n    const data = await result.json();\n    setOrders(data.data.order);\n  };\n\n  const newData = async data => {\n    const resOrder = await data;\n    console.log(resOrder);\n    setOrderData(resOrder);\n    setOrderId(resOrder._id);\n    authCtx.onOrder(resOrder.order._id);\n  }; // const orderNoHandler = () =>{\n  // \tlet total = 0\n  // \tconsole.log(\"entered\")\n  // \t// console.log(order.length)\n  // \torder.map(item => {\n  // \t\tif(item.user_id===userData._id){\n  // \t\t\ttotal = total + 1\n  // \t\t}\n  // \t})\n  // \torderStart = 1000+total+1\n  // \t// console.log(orderStart)\n  // \tsetOrderNo(orderStart)\n  // }\n\n\n  useEffect(() => {\n    document.title = \"Checkout\";\n    fetchCartData();\n    fetchOrders();\n    fetchDiscountData();\n    fetchUserData();\n\n    if (orderId !== '') {\n      fetchOrderData();\n    }\n  }, []);\n  console.log(orderId, orderData, authCtx.orderId, order);\n\n  const emailValidation = async event => {\n    const regex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i;\n\n    if (!billingAddress.email || regex.test(billingAddress.email) === false || !shippingAddress.email || regex.test(shippingAddress.email) === false) {\n      alert(\"Email is not valid\");\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  const checkoutHandler = async event => {\n    event.preventDefault();\n    let url;\n\n    if (!isInvalid) {\n      if (await emailValidation()) {\n        let total = 0; // console.log(order.length)\n\n        order.map(item => {\n          if (item.user_id === userData._id) {\n            total = total + 1;\n          }\n        });\n        const orderNo = 1000 + total + 1;\n\n        if (orderId === '') {\n          url = 'http://localhost:3000/orders';\n          await fetch(url, {\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              order_no: orderNo,\n              user_id: authCtx.userId,\n              billing_address: billingAddress,\n              shipping_address: shippingAddress,\n              order_status: \"pending\",\n              products: existingCartItems,\n              total_quantity: cartData.total_quantity,\n              total_amount: cartData.total_amount,\n              discounted_amount: cartData.discounted_amount,\n              total_item: cartData.total_item,\n              discount_code: cartData.discount_code,\n              discount_value: cartData.discount,\n              final_price: cartData.final_price\n            })\n          }).then(res => {\n            if (res.ok) {\n              return res.json();\n            } else {\n              return res.json().then(data => {\n                throw new Error(data.status);\n              });\n            }\n          }).then(data => {\n            console.log(data.data.order); // setOrderData(data.data.order)\n            // setOrderId(data.data.order._id)\n\n            authCtx.onOrder(data.data.order._id);\n            newData(data.data.order);\n            alert(\"Added to order\");\n          });\n        } else {\n          // orderNoHandler()\n          url = `http://localhost:3000/orders/${orderId}`;\n          await fetch(url, {\n            method: 'PATCH',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              order_no: orderNo,\n              user_id: authCtx.userId,\n              billing_address: billingAddress,\n              shipping_address: shippingAddress,\n              order_status: \"pending\",\n              products: existingCartItems,\n              total_quantity: cartData.total_quantity,\n              total_amount: cartData.total_amount,\n              discounted_amount: cartData.discounted_amount,\n              total_item: cartData.total_item,\n              discount_code: cartData.discount_code,\n              discount_value: cartData.discount_value,\n              final_price: cartData.final_price\n            })\n          }).then(res => {\n            if (res.ok) {\n              return res.json();\n            } else {\n              return res.json().then(data => {\n                throw new Error(data.status);\n              });\n            }\n          }).then(data => {\n            // console.log(data)\n            alert(\"Updated Order\");\n            authCtx.onOrder(data.data.order._id);\n            setOrderId(data.data.order._id);\n            setOrderData(data.data.order);\n          });\n        }\n\n        let stripeData = [];\n        let discountedAmount; // let discount_code = ''\n\n        existingCartItems.map(cartItem => {\n          discountData.map(item => {\n            if (item.discount_code === cartData.discount_code) {\n              if (item.applied_all === \"all\") {\n                const discountValue = Math.abs(item.discount_value / 100 * 100).toFixed(2);\n                const totalDiscount = parseFloat(cartItem.product_price * discountValue / 100);\n                discountedAmount = parseFloat(cartItem.product_price - totalDiscount);\n                console.log(discountValue, totalDiscount, discountedAmount); // discount_code = item.discount_code\n              } else if (item.products.includes(cartItem.product_id)) {\n                console.log(item.products);\n                const discountValue = Math.abs(item.discount_value / 100 * 100).toFixed(2);\n                const totalDiscount = parseFloat(cartItem.product_price * discountValue / 100);\n                discountedAmount = parseFloat(cartItem.product_price - totalDiscount); // discount_code = item.discount_code\n\n                console.log(discountValue, totalDiscount, discountedAmount); // if(discountedAmount>0) \n                // \t<>\n                // \t\t<span className=\"order-summary__emphasis__strike\">${parseInt(cartItem.product_price)*parseInt(cartItem.quantity)}</span>\n                // \t\t<span className=\"order-summary__emphasis\">${cartItem.discounted_price}</span>\n                // \t</>)\n                // :\n                // <span className=\"order-summary__emphasis\">${parseInt(cartItem.product_price)*parseInt(cartItem.quantity)}</span>\n              } else {\n                console.log(\"Nothing\");\n              }\n            }\n          });\n          const obj = {\n            name: cartItem.product_name,\n            amount: parseInt(discountedAmount),\n            quantity: cartItem.quantity,\n            currency: \"USD\" // image: cartItem.product_image\n\n          };\n          stripeData.push(obj);\n        });\n        console.log(stripeData, orderData, orderId, authCtx.orderId);\n        const session = await axios.post(\"http://localhost:3000/stripe/payment\", {\n          lineItem: stripeData,\n          orderId: authCtx.orderId\n        });\n        console.log(session);\n        const {\n          error\n        } = await stripe.redirectToCheckout({\n          sessionId: session.data.session.id\n        });\n      }\n    } // if(!isInvalid){\n    // \tif(await emailValidation()){\n    // \t\tawait fetch('http://localhost:3000/orders',{\n    // \t\t\tmethod: 'POST',\n    // \t\t\theaders: {\n    // \t\t\t\t'Accept' : 'application/json',\n    // \t\t\t\t'Content-Type' : 'application/json',\n    // \t\t\t},\n    // \t\t\tbody: JSON.stringify({\n    // \t\t\t\torder_no: \"10002\",\n    // \t\t\t\tuser_id: \"abcdefg1234\",\n    // \t\t\t\tbilling_address: billingAddress,\n    // \t\t\t\tshipping_address: shippingAddress,\n    // \t\t\t\torder_status: \"pending\",\n    // \t\t\t\tproducts: existingCartItems,\n    // \t\t\t\ttotal_quantity: cartData.total_quantity,\n    // \t\t\t\ttotal_amount: cartData.total_amount,\n    // \t\t\t\tdiscounted_amount: cartData.discounted_amount,\n    // \t\t\t\ttotal_item: cartData.total_item,\n    // \t\t\t\tdiscount_code: cartData.discount_code,\n    // \t\t\t\tdiscount_value: cartData.discount\n    // \t\t\t})\n    // \t\t}).then(res => {\n    // \t\t\tif(res.ok){\n    // \t\t\t\treturn res.json();\n    // \t\t\t}else{\n    // \t\t\t\treturn res.json().then((data) => {\n    // \t\t\t\t\tthrow new Error(data.status);\n    // \t\t\t\t});\n    // \t\t\t}\n    // \t\t}).then((data) => {\n    // \t\t\talert(\"Added to order\");\n    // \t\t\tauthCtx.onOrder(data.data.order._id)\n    // \t\t})\n    // \t\tconsole.log(authCtx.orderId)\n    // \t\t// await fetch(`http://localhost:3000/payment`,{\n    // \t\t// \tmethod: 'POST',\n    // \t\t// \theaders: {\n    // \t\t// \t\t'Accept' : 'application/json',\n    // \t\t// \t\t'Content-Type' : 'application/json',\n    // \t\t// \t},\n    // \t\t// \tbody: JSON.stringify({\n    // \t\t// \t\tlineItem: stripeData\n    // \t\t// \t})\n    // \t\t// })\n    // \t\tconst session = await axios.post(\"http://localhost:3000/stripe/payment\", {\n    // \t\t\tlineItem: stripeData, orderId: authCtx.orderId\n    // \t\t})\n    // \t\tconsole.log(session)\n    // \t\tconst { error } = await stripe.redirectToCheckout({\n    // \t\t\tsessionId: session.data.session.id,\n    // \t\t});\n    // \t}\n    // }else{\n    // \talert(\"Please fill all the data!\")\n    // }\n\n  }; // console.log(discountData)\n\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkout-template page-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkout-details row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"checkout-wrap\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"checkout-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"contact-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"fieldset\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"Contact information\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 361,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 363,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"input-text\",\n                        placeholder: \"Enter your name\",\n                        value: billingAddress.name,\n                        onChange: _ref => {\n                          let {\n                            target\n                          } = _ref;\n                          return setBillingAddress({ ...billingAddress,\n                            name: target.value\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 365,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 364,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Email Id\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 375,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"email\" // className=\"input-text\" \n                        ,\n                        placeholder: \"Enter your email id\",\n                        value: billingAddress.email,\n                        onChange: _ref2 => {\n                          let {\n                            target\n                          } = _ref2;\n                          setBillingAddress({ ...billingAddress,\n                            email: target.value\n                          }); // validateEmail(billingAddress.email);\n                        } // onChange={({target}) => validateEmail(...target.value,target.value)}\n\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 377,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 376,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Phone\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 391,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"input-text\",\n                        placeholder: \"Enter your phone no.\",\n                        value: billingAddress.phone,\n                        onChange: _ref3 => {\n                          let {\n                            target\n                          } = _ref3;\n                          return setBillingAddress({ ...billingAddress,\n                            phone: target.value\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 393,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 392,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 390,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Address\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 403,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"input-text\",\n                        placeholder: \"Enter your address\",\n                        value: billingAddress.address,\n                        onChange: _ref4 => {\n                          let {\n                            target\n                          } = _ref4;\n                          return setBillingAddress({ ...billingAddress,\n                            address: target.value\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 405,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 404,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 402,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Postal Code\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 415,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"input-text\",\n                        placeholder: \"Enter your postal code\",\n                        value: billingAddress.postal_code,\n                        onChange: _ref5 => {\n                          let {\n                            target\n                          } = _ref5;\n                          return setBillingAddress({ ...billingAddress,\n                            postal_code: target.value\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 417,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 416,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"fieldset\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"Shipping Address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 431,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"input-text\",\n                        placeholder: \"Enter your name\",\n                        value: shippingAddress.name,\n                        onChange: _ref6 => {\n                          let {\n                            target\n                          } = _ref6;\n                          return setShippingAddress({ ...shippingAddress,\n                            name: target.value\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 433,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 432,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Email Id\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 443,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"email\",\n                        pattern: \".+@globex\\\\.com\",\n                        className: \"input-text\",\n                        placeholder: \"Enter your email id\",\n                        value: shippingAddress.email,\n                        onChange: _ref7 => {\n                          let {\n                            target\n                          } = _ref7;\n                          return setShippingAddress({ ...shippingAddress,\n                            email: target.value\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 445,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 444,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Phone\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 456,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"input-text\",\n                        placeholder: \"Enter your phone no.\",\n                        value: shippingAddress.phone,\n                        onChange: _ref8 => {\n                          let {\n                            target\n                          } = _ref8;\n                          return setShippingAddress({ ...shippingAddress,\n                            phone: target.value\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 458,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 457,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 455,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Address\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 468,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"input-text\",\n                        placeholder: \"Enter your address\",\n                        value: shippingAddress.address,\n                        onChange: _ref9 => {\n                          let {\n                            target\n                          } = _ref9;\n                          return setShippingAddress({ ...shippingAddress,\n                            address: target.value\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 470,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 469,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 467,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field-input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Postal Code\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 480,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"input-text\",\n                        placeholder: \"Enter your postal code\",\n                        value: shippingAddress.postal_code,\n                        onChange: _ref10 => {\n                          let {\n                            target\n                          } = _ref10;\n                          return setShippingAddress({ ...shippingAddress,\n                            postal_code: target.value\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 482,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 481,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 479,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 428,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"action-btn\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"button button--hollow\",\n                    onClick: checkoutHandler,\n                    children: \"Proceed to Payment\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 493,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(Link, {\n                    to: ROUTES.CART,\n                    className: \"button secondary-btn\",\n                    children: \"Return to Cart\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 494,\n                    columnNumber: 26\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 492,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"order-summary-right\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"order-summary__sections\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"order-summary__section__content\",\n                      children: /*#__PURE__*/_jsxDEV(\"table\", {\n                        className: \"product-table\",\n                        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                          className: \"product-table__header\",\n                          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"visually-hidden\",\n                                children: \"Image\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 504,\n                                columnNumber: 27\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 504,\n                              columnNumber: 23\n                            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"visually-hidden\",\n                                children: \"Description\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 505,\n                                columnNumber: 27\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 505,\n                              columnNumber: 23\n                            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"visually-hidden\",\n                                children: \"Quantity\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 506,\n                                columnNumber: 27\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 506,\n                              columnNumber: 23\n                            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"visually-hidden\",\n                                children: \"Price\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 507,\n                                columnNumber: 27\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 507,\n                              columnNumber: 23\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 503,\n                            columnNumber: 21\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 502,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                          children: existingCartItems.map(cartItem => /*#__PURE__*/_jsxDEV(\"tr\", {\n                            className: \"product\",\n                            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                              className: \"product__image\",\n                              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"product-thumbnail \",\n                                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                  className: \"product-thumbnail__wrapper\",\n                                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                                    alt: \"Basic Green T-Shirt\",\n                                    className: \"product-thumbnail__image\",\n                                    src: `images/product/${cartItem.product_image}`\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 516,\n                                    columnNumber: 20\n                                  }, this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 515,\n                                  columnNumber: 19\n                                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: \"product-thumbnail__quantity\",\n                                  children: cartItem.quantity\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 518,\n                                  columnNumber: 19\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 514,\n                                columnNumber: 18\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 513,\n                              columnNumber: 17\n                            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                              className: \"product__description\",\n                              scope: \"row\",\n                              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"product__description__name\",\n                                children: cartItem.product_name\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 522,\n                                columnNumber: 18\n                              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"product__description__variant\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 523,\n                                columnNumber: 18\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 521,\n                              columnNumber: 17\n                            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                              className: \"product__quantity\",\n                              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"visually-hidden\",\n                                children: \"1\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 526,\n                                columnNumber: 18\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 525,\n                              columnNumber: 17\n                            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                              className: \"product__price\",\n                              children: [discountData.map(item => {\n                                if (item.discount_code === cartData.discount_code) {\n                                  if (item.applied_all === \"all\") {\n                                    const discountValue = Math.abs(item.discount_value / 100 * 100).toFixed(2);\n                                    const totalDiscount = parseFloat(cartItem.product_price * discountValue / 100);\n                                    discountedAmount = parseFloat(cartItem.product_price - totalDiscount); // console.log(discountValue, totalDiscount, discountedAmount)\n                                  } else if (item.products.includes(cartItem.product_id)) {\n                                    console.log(item.products);\n                                    const discountValue = Math.abs(item.discount_value / 100 * 100).toFixed(2);\n                                    const totalDiscount = parseFloat(cartItem.product_price * discountValue / 100);\n                                    discountedAmount = parseFloat(cartItem.product_price - totalDiscount); // console.log(discountValue, totalDiscount, discountedAmount)\n                                    // if(discountedAmount>0) \n                                    // \t<>\n                                    // \t\t<span className=\"order-summary__emphasis__strike\">${parseInt(cartItem.product_price)*parseInt(cartItem.quantity)}</span>\n                                    // \t\t<span className=\"order-summary__emphasis\">${cartItem.discounted_price}</span>\n                                    // \t</>)\n                                    // :\n                                    // <span className=\"order-summary__emphasis\">${parseInt(cartItem.product_price)*parseInt(cartItem.quantity)}</span>\n                                  } else {\n                                    console.log(\"Nothing\");\n                                  }\n                                }\n                              }), discountedAmount > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: \"order-summary__emphasis__strike\",\n                                  children: [\"$\", parseInt(cartItem.product_price) * parseInt(cartItem.quantity)]\n                                }, void 0, true, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 561,\n                                  columnNumber: 20\n                                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: \"order-summary__emphasis\",\n                                  children: [\"$\", parseFloat(discountedAmount) * parseFloat(cartItem.quantity)]\n                                }, void 0, true, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 562,\n                                  columnNumber: 20\n                                }, this)]\n                              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"order-summary__emphasis\",\n                                children: [\"$\", parseFloat(cartItem.product_price * cartItem.quantity)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 565,\n                                columnNumber: 19\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 528,\n                              columnNumber: 17\n                            }, this)]\n                          }, cartItem._id, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 512,\n                            columnNumber: 16\n                          }, this))\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 510,\n                          columnNumber: 17\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 501,\n                        columnNumber: 28\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 500,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"no-margin evenly-align mt-20\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"cart-total-quantity\",\n                        children: [cartData.total_item, \" items\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 574,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"cart-total-price\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: [\"$\", cartData.total_amount]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 576,\n                          columnNumber: 32\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 575,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 573,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"cart-subtotal evenly-align cart__total\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"cart-subtotal__title\",\n                        children: \"Discount\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 580,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"cart-subtotal__price\",\n                          children: [\"-$\", cartData.discounted_amount]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 581,\n                          columnNumber: 39\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 581,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 579,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"cart-subtotal evenly-align cart__total\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"cart-subtotal__title\",\n                        children: \"Subtotal\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 584,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"cart-subtotal__price\",\n                          children: [\"$\", (parseFloat(cartData.total_amount) - parseFloat(cartData.discounted_amount)).toFixed(2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 585,\n                          columnNumber: 39\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 585,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 583,\n                      columnNumber: 26\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"cart__total evenly-align separator\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"cart__total-text\",\n                        children: \"Total:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 588,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                        className: \"cart__total-price text-lg\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          children: (parseFloat(cartData.total_amount) - parseFloat(cartData.discounted_amount)).toFixed(2)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 590,\n                          columnNumber: 32\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \" USD\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 591,\n                          columnNumber: 32\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 589,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 587,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 499,\n                    columnNumber: 14\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 351,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Checkout, \"+UgCnosmgxw4C6Y4Fp7X41XIAhY=\", false, function () {\n  return [useNavigate, useStripe];\n});\n\n_c = Checkout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["C:/Users/Admin/Downloads/Komerce-Ecomerce-main/komerce-react/src/components/user/checkout.js"],"names":["React","useState","useEffect","useContext","Link","useNavigate","useStripe","validator","axios","AuthContext","ROUTES","Checkout","history","stripe","authCtx","isAuth","orderId","setOrderId","cartData","setCartData","discountData","setDiscountData","orderData","setOrderData","order","setOrders","orderNo","setOrderNo","existingCartItems","setExistingCartItems","userData","setUserData","error","setError","discountedAmount","orderStart","billingAddress","setBillingAddress","name","email","phone","address","postal_code","shippingAddress","setShippingAddress","isInvalid","fetchCartData","result","fetch","cartId","data","json","newData","cart","eData","existingItem","fetchDiscountData","discounts","fetchOrderData","console","log","billingData","billing_address","shippingData","shipping_address","fetchUserData","userId","user","fetchOrders","resOrder","_id","onOrder","document","title","emailValidation","event","regex","test","alert","checkoutHandler","preventDefault","url","total","map","item","user_id","method","headers","body","JSON","stringify","order_no","order_status","products","total_quantity","total_amount","discounted_amount","total_item","discount_code","discount_value","discount","final_price","then","res","ok","Error","status","stripeData","cartItem","applied_all","discountValue","Math","abs","toFixed","totalDiscount","parseFloat","product_price","includes","product_id","obj","product_name","amount","parseInt","quantity","currency","push","session","post","lineItem","redirectToCheckout","sessionId","id","target","value","CART","product_image"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useStripe } from '@stripe/react-stripe-js';\nimport validator from \"validator\";\nimport axios from \"axios\";\n\nimport AuthContext from '../../context/authContext';\nimport * as ROUTES from '../../constants/routes';\n\nexport default function Checkout(){\n\tconst history = useNavigate()\n\tconst stripe = useStripe();\n    const authCtx = useContext(AuthContext);\n    const isAuth = authCtx.isAuth;\n\tconst [orderId, setOrderId] = useState('');\n\t// console.log(orderId)\n\tconst [cartData, setCartData] = useState([]);\n\tconst [discountData, setDiscountData] = useState([]);\n\tconst [orderData, setOrderData] = useState([]);\n\tconst [order,setOrders] = useState([]);\n\tconst [orderNo, setOrderNo] = useState('')\n\tconst [existingCartItems, setExistingCartItems] = useState([]);\n\tconst [userData, setUserData] = useState([])\n\tconst [error, setError] = useState('');\n\tlet discountedAmount\n\tlet orderStart = 0\n\n\tconst [billingAddress, setBillingAddress] = useState({\n\t\tname: '',\n        email: '',\n        phone: '',\n        address: '',\n        postal_code: ''\n\t})\n\tconst [shippingAddress, setShippingAddress] = useState({\n\t\tname: '',\n        email: '',\n        phone: '',\n        address: '',\n        postal_code: ''\n\t})\n\n\tconst isInvalid = billingAddress.name === '' || billingAddress.email === '' || billingAddress.phone === '' || billingAddress.address === '' || billingAddress.postal_code === '' ||\n\t\t\t\t\t\tshippingAddress.name === '' || shippingAddress.email === '' || shippingAddress.phone === '' || shippingAddress.address === '' || shippingAddress.postal_code === ''\n\n\tconst fetchCartData = async () => {\n\t\tconst result = await fetch(`http://localhost:3000/carts/${authCtx.cartId}`)\n\t\tconst data = await result.json()\n        const newData = data.data.cart\n        const eData = newData.existingItem\n\t\tsetCartData(newData)\n        setExistingCartItems(eData)\n\t\tsetOrderId(authCtx.orderId)\n\t}\n\n\tconst fetchDiscountData = async() => {\n\t\tconst result = await fetch('http://localhost:3000/discounts')\n\t\tconst data = await result.json()\n\t\tsetDiscountData(data.data.discounts)\n\t}\n\n\tconst fetchOrderData = async () => {\n\t\tconsole.log(\"Entered\")\n\t\tconst result = await fetch(`http://localhost:3000/orders/${authCtx.orderId}`)\n\t\tconst data = await result.json()\n\t\tsetOrderData(data.data.order)\n\t\tconst billingData = data.data.order.billing_address\n\t\tconst shippingData = data.data.order.shipping_address\n\t\tsetBillingAddress({\n\t\t\tname: billingData.name,\n\t\t\temail: billingData.email,\n\t\t\tphone: billingData.phone,\n\t\t\taddress: billingData.address,\n\t\t\tpostal_code: billingData.postal_code\n\t\t})\n\t\tsetShippingAddress({\n\t\t\tname: shippingData.name,\n\t\t\temail: shippingData.email,\n\t\t\tphone: shippingData.phone,\n\t\t\taddress: shippingData.address,\n\t\t\tpostal_code: shippingData.postal_code\n\t\t})\n\t\t// setOrderNo(data.data.order.order_no)\n\t}\n\n\tconst fetchUserData = async() => {\n\t\tconst result = await fetch(`http://localhost:3000/users/${authCtx.userId}`)\n\t\tconst data = await result.json()\n\t\tsetUserData(data.data.user)\n\t}\n\n\tconst fetchOrders = async() => {\n\t\tconst result = await fetch(\"http://localhost:3000/orders\")\n\t\tconst data = await result.json()\n\t\tsetOrders(data.data.order)\n\t}\n\n\tconst newData = async(data) => {\n\t\tconst resOrder = await data\n\t\tconsole.log(resOrder)\n\t\tsetOrderData(resOrder)\n\t\tsetOrderId(resOrder._id)\n\t\tauthCtx.onOrder(resOrder.order._id)\n\t}\n\n\t// const orderNoHandler = () =>{\n\t// \tlet total = 0\n\t// \tconsole.log(\"entered\")\n\t// \t// console.log(order.length)\n\t// \torder.map(item => {\n\t// \t\tif(item.user_id===userData._id){\n\t// \t\t\ttotal = total + 1\n\t// \t\t}\n\t// \t})\n\t// \torderStart = 1000+total+1\n\t// \t// console.log(orderStart)\n\t// \tsetOrderNo(orderStart)\n\t// }\n\n\tuseEffect(() => {\n\t\tdocument.title = \"Checkout\"\n        fetchCartData()\n\t\tfetchOrders()\n\t\tfetchDiscountData()\n\t\tfetchUserData()\n\t\tif(orderId!==''){\n\t\t\tfetchOrderData()\n\t\t}\n\t},[])\n\tconsole.log(orderId, orderData, authCtx.orderId, order)\n\n\tconst emailValidation = async(event) => {\n\t\tconst regex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i;\n\t\tif(!billingAddress.email || regex.test(billingAddress.email) === false || !shippingAddress.email || regex.test(shippingAddress.email) === false){\n            alert(\"Email is not valid\");\n            return false;\n        }else{\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tconst checkoutHandler = async(event) => {\n\t\tevent.preventDefault();\n\t\tlet url\n\t\tif(!isInvalid){\n\t\t\tif(await emailValidation()){\n\t\t\t\tlet total = 0\n\t\t\t\t// console.log(order.length)\n\t\t\t\torder.map(item => {\n\t\t\t\t\tif(item.user_id===userData._id){\n\t\t\t\t\t\ttotal = total + 1\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tconst orderNo = 1000+total+1\n\t\t\t\tif(orderId === ''){\n\t\t\t\t\turl = 'http://localhost:3000/orders'\n\t\t\t\t\tawait fetch(url,{\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Accept' : 'application/json',\n\t\t\t\t\t\t\t'Content-Type' : 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\torder_no: orderNo,\n\t\t\t\t\t\t\tuser_id: authCtx.userId,\n\t\t\t\t\t\t\tbilling_address: billingAddress,\n\t\t\t\t\t\t\tshipping_address: shippingAddress,\n\t\t\t\t\t\t\torder_status: \"pending\",\n\t\t\t\t\t\t\tproducts: existingCartItems,\n\t\t\t\t\t\t\ttotal_quantity: cartData.total_quantity,\n\t\t\t\t\t\t\ttotal_amount: cartData.total_amount,\n\t\t\t\t\t\t\tdiscounted_amount: cartData.discounted_amount,\n\t\t\t\t\t\t\ttotal_item: cartData.total_item,\n\t\t\t\t\t\t\tdiscount_code: cartData.discount_code,\n\t\t\t\t\t\t\tdiscount_value: cartData.discount,\n\t\t\t\t\t\t\tfinal_price: cartData.final_price\n\t\t\t\t\t\t})\n\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\tif(res.ok){\n\t\t\t\t\t\t\treturn res.json();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\treturn res.json().then((data) => {\n\t\t\t\t\t\t\t\tthrow new Error(data.status);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then((data) => {\n\t\t\t\t\t\tconsole.log(data.data.order)\n\t\t\t\t\t\t// setOrderData(data.data.order)\n\t\t\t\t\t\t// setOrderId(data.data.order._id)\n\t\t\t\t\t\tauthCtx.onOrder(data.data.order._id)\n\t\t\t\t\t\tnewData(data.data.order)\n\t\t\t\t\t\talert(\"Added to order\");\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t// orderNoHandler()\n\t\t\t\t\turl = `http://localhost:3000/orders/${orderId}`\n\t\t\t\t\tawait fetch(url,{\n\t\t\t\t\t\tmethod: 'PATCH',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Accept' : 'application/json',\n\t\t\t\t\t\t\t'Content-Type' : 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\torder_no: orderNo,\n\t\t\t\t\t\t\tuser_id: authCtx.userId,\n\t\t\t\t\t\t\tbilling_address: billingAddress,\n\t\t\t\t\t\t\tshipping_address: shippingAddress,\n\t\t\t\t\t\t\torder_status: \"pending\",\n\t\t\t\t\t\t\tproducts: existingCartItems,\n\t\t\t\t\t\t\ttotal_quantity: cartData.total_quantity,\n\t\t\t\t\t\t\ttotal_amount: cartData.total_amount,\n\t\t\t\t\t\t\tdiscounted_amount: cartData.discounted_amount,\n\t\t\t\t\t\t\ttotal_item: cartData.total_item,\n\t\t\t\t\t\t\tdiscount_code: cartData.discount_code,\n\t\t\t\t\t\t\tdiscount_value: cartData.discount_value,\n\t\t\t\t\t\t\tfinal_price: cartData.final_price\n\t\t\t\t\t\t})\n\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\tif(res.ok){\n\t\t\t\t\t\t\treturn res.json();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\treturn res.json().then((data) => {\n\t\t\t\t\t\t\t\tthrow new Error(data.status);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then((data) => {\n\t\t\t\t\t\t// console.log(data)\n\t\t\t\t\t\talert(\"Updated Order\");\n\t\t\t\t\t\tauthCtx.onOrder(data.data.order._id)\n\t\t\t\t\t\tsetOrderId(data.data.order._id)\n\t\t\t\t\t\tsetOrderData(data.data.order)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet stripeData = []\n\t\t\t\tlet discountedAmount\n\t\t\t\t// let discount_code = ''\n\t\t\t\texistingCartItems.map(cartItem => {\n\t\t\t\t\tdiscountData.map(item => {\n\t\t\t\t\t\tif(item.discount_code === cartData.discount_code){\n\t\t\t\t\t\t\tif(item.applied_all===\"all\"){\n\t\t\t\t\t\t\t\tconst discountValue=Math.abs((item.discount_value/100)*100).toFixed(2)\n\t\t\t\t\t\t\t\tconst totalDiscount=parseFloat(cartItem.product_price*discountValue/100)\n\t\t\t\t\t\t\t\tdiscountedAmount = parseFloat(cartItem.product_price-totalDiscount)\n\t\t\t\t\t\t\t\tconsole.log(discountValue, totalDiscount, discountedAmount)\n\t\t\t\t\t\t\t\t// discount_code = item.discount_code\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(item.products.includes(cartItem.product_id)){\n\t\t\t\t\t\t\t\tconsole.log(item.products)\n\t\t\t\t\t\t\t\tconst discountValue=Math.abs((item.discount_value/100)*100).toFixed(2)\n\t\t\t\t\t\t\t\tconst totalDiscount=parseFloat(cartItem.product_price*discountValue/100)\n\t\t\t\t\t\t\t\tdiscountedAmount = parseFloat(cartItem.product_price-totalDiscount)\n\t\t\t\t\t\t\t\t// discount_code = item.discount_code\n\t\t\t\t\t\t\t\tconsole.log(discountValue, totalDiscount, discountedAmount)\n\t\t\t\t\t\t\t\t// if(discountedAmount>0) \n\t\t\t\t\t\t\t\t// \t<>\n\t\t\t\t\t\t\t\t// \t\t<span className=\"order-summary__emphasis__strike\">${parseInt(cartItem.product_price)*parseInt(cartItem.quantity)}</span>\n\t\t\t\t\t\t\t\t// \t\t<span className=\"order-summary__emphasis\">${cartItem.discounted_price}</span>\n\t\t\t\t\t\t\t\t// \t</>)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// :\n\t\t\t\t\t\t\t\t// <span className=\"order-summary__emphasis\">${parseInt(cartItem.product_price)*parseInt(cartItem.quantity)}</span>\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.log(\"Nothing\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tconst obj = {\n\t\t\t\t\t\tname: cartItem.product_name,\n\t\t\t\t\t\tamount: parseInt(discountedAmount),\n\t\t\t\t\t\tquantity: cartItem.quantity,\n\t\t\t\t\t\tcurrency: \"USD\",\n\t\t\t\t\t\t// image: cartItem.product_image\n\t\t\t\t\t}\n\t\t\t\t\tstripeData.push(obj)\n\t\t\t\t})\n\t\t\t\tconsole.log(stripeData, orderData, orderId, authCtx.orderId)\n\t\t\t\tconst session = await axios.post(\"http://localhost:3000/stripe/payment\", {\n\t\t\t\t\tlineItem: stripeData, orderId: authCtx.orderId\n\t\t\t\t})\n\t\t\t\tconsole.log(session)\n\t\t\t\tconst { error } = await stripe.redirectToCheckout({\n\t\t\t\t\tsessionId: session.data.session.id,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t// if(!isInvalid){\n\t\t// \tif(await emailValidation()){\n\t\t// \t\tawait fetch('http://localhost:3000/orders',{\n\t\t// \t\t\tmethod: 'POST',\n\t\t// \t\t\theaders: {\n\t\t// \t\t\t\t'Accept' : 'application/json',\n\t\t// \t\t\t\t'Content-Type' : 'application/json',\n\t\t// \t\t\t},\n\t\t// \t\t\tbody: JSON.stringify({\n\t\t// \t\t\t\torder_no: \"10002\",\n\t\t// \t\t\t\tuser_id: \"abcdefg1234\",\n\t\t// \t\t\t\tbilling_address: billingAddress,\n\t\t// \t\t\t\tshipping_address: shippingAddress,\n\t\t// \t\t\t\torder_status: \"pending\",\n\t\t// \t\t\t\tproducts: existingCartItems,\n\t\t// \t\t\t\ttotal_quantity: cartData.total_quantity,\n\t\t// \t\t\t\ttotal_amount: cartData.total_amount,\n\t\t// \t\t\t\tdiscounted_amount: cartData.discounted_amount,\n\t\t// \t\t\t\ttotal_item: cartData.total_item,\n\t\t// \t\t\t\tdiscount_code: cartData.discount_code,\n\t\t// \t\t\t\tdiscount_value: cartData.discount\n\t\t// \t\t\t})\n\t\t// \t\t}).then(res => {\n\t\t// \t\t\tif(res.ok){\n\t\t// \t\t\t\treturn res.json();\n\t\t// \t\t\t}else{\n\t\t// \t\t\t\treturn res.json().then((data) => {\n\t\t// \t\t\t\t\tthrow new Error(data.status);\n\t\t// \t\t\t\t});\n\t\t// \t\t\t}\n\t\t// \t\t}).then((data) => {\n\t\t// \t\t\talert(\"Added to order\");\n\t\t// \t\t\tauthCtx.onOrder(data.data.order._id)\n\t\t// \t\t})\n\t\t// \t\tconsole.log(authCtx.orderId)\n\n\t\t// \t\t// await fetch(`http://localhost:3000/payment`,{\n\t\t// \t\t// \tmethod: 'POST',\n\t\t// \t\t// \theaders: {\n\t\t// \t\t// \t\t'Accept' : 'application/json',\n\t\t// \t\t// \t\t'Content-Type' : 'application/json',\n\t\t// \t\t// \t},\n\t\t// \t\t// \tbody: JSON.stringify({\n\t\t// \t\t// \t\tlineItem: stripeData\n\t\t// \t\t// \t})\n\t\t// \t\t// })\n\t\t// \t\tconst session = await axios.post(\"http://localhost:3000/stripe/payment\", {\n\t\t// \t\t\tlineItem: stripeData, orderId: authCtx.orderId\n\t\t// \t\t})\n\t\t// \t\tconsole.log(session)\n\t\t// \t\tconst { error } = await stripe.redirectToCheckout({\n\t\t// \t\t\tsessionId: session.data.session.id,\n\t\t// \t\t});\n\t\t// \t}\n\n\n\t\t// }else{\n\t\t// \talert(\"Please fill all the data!\")\n\t\t// }\n\t}\n\t// console.log(discountData)\n\n    return(\n        <section>\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"checkout-template page-content\">\n\t\t\t\t\t<h2>Checkout</h2>\n\t\t\t\t\t<div className=\"checkout-details row\">\n\t\t\t\t\t\t<div className=\"checkout-wrap\">\n\t\t\t\t\t\t\t<div className=\"checkout-section\">\n\t\t\t\t\t\t\t\t<div className=\"contact-info\">\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div className=\"fieldset\">\n\t\t\t\t\t\t\t\t\t\t<h3>Contact information</h3>\n\t\t\t\t\t\t\t\t\t\t<div className=\"field-input\">\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">Name</label>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"input-text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your name\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={billingAddress.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={({ target }) => setBillingAddress({...billingAddress,name:target.value})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"field-input\">\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">Email Id</label>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"email\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t// className=\"input-text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your email id\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={billingAddress.email}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={({target}) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetBillingAddress({...billingAddress,email:target.value})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// validateEmail(billingAddress.email);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// onChange={({target}) => validateEmail(...target.value,target.value)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"field-input\">\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">Phone</label>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"input-text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your phone no.\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={billingAddress.phone}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={({ target }) => setBillingAddress({...billingAddress,phone:target.value})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"field-input\">\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">Address</label>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"input-text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your address\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={billingAddress.address}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={({ target }) => setBillingAddress({...billingAddress,address:target.value})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"field-input\">\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">Postal Code</label>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"input-text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your postal code\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={billingAddress.postal_code}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={({ target }) => setBillingAddress({...billingAddress,postal_code:target.value})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div className=\"fieldset\">\n\t\t\t\t\t\t\t\t\t\t<h3>Shipping Address</h3>\n\t\t\t\t\t\t\t\t\t\t<div className=\"field-input\">\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">Name</label>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"input-text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your name\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={shippingAddress.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={({ target }) => setShippingAddress({...shippingAddress,name:target.value})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"field-input\">\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">Email Id</label>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"email\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tpattern=\".+@globex\\.com\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"input-text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your email id\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={shippingAddress.email}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={({ target }) => setShippingAddress({...shippingAddress,email:target.value})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"field-input\">\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">Phone</label>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"input-text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your phone no.\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={shippingAddress.phone}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={({ target }) => setShippingAddress({...shippingAddress,phone:target.value})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"field-input\">\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">Address</label>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"input-text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your address\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={shippingAddress.address}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={({ target }) => setShippingAddress({...shippingAddress,address:target.value})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"field-input\">\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">Postal Code</label>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"input-text\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your postal code\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={shippingAddress.postal_code}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={({ target }) => setShippingAddress({...shippingAddress,postal_code:target.value})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"action-btn\">\n\t\t\t\t\t\t\t\t\t\t<button className=\"button button--hollow\" onClick={checkoutHandler}>Proceed to Payment</button>\n\t\t\t                    \t\t<Link to={ROUTES.CART} className=\"button secondary-btn\">Return to Cart</Link>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"order-summary-right\">\n\t\t\t\t\t\t\t\t\t<div className=\"order-summary__sections\">\n\t\t\t\t\t\t\t\t\t    <div className=\"\">\n\t\t\t\t\t\t                    <div className=\"order-summary__section__content\">\n\t\t\t\t\t\t                    \t<table className=\"product-table\">\n\t\t\t\t\t\t                    \t\t<thead className=\"product-table__header\">\n\t\t\t\t\t\t\t\t\t\t\t\t        <tr>\n\t\t\t\t\t\t\t\t\t\t\t\t          <th><span className=\"visually-hidden\">Image</span></th>\n\t\t\t\t\t\t\t\t\t\t\t\t          <th><span className=\"visually-hidden\">Description</span></th>\n\t\t\t\t\t\t\t\t\t\t\t\t          <th><span className=\"visually-hidden\">Quantity</span></th>\n\t\t\t\t\t\t\t\t\t\t\t\t          <th><span className=\"visually-hidden\">Price</span></th>\n\t\t\t\t\t\t\t\t\t\t\t\t        </tr>\n\t\t\t\t\t\t\t\t\t\t\t\t    </thead>\n\t\t\t\t\t\t\t\t\t\t\t\t    <tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{existingCartItems.map(cartItem => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr className=\"product\" key={cartItem._id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"product__image\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"product-thumbnail \">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"product-thumbnail__wrapper\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img alt=\"Basic Green T-Shirt\" className=\"product-thumbnail__image\" src={`images/product/${cartItem.product_image}`}/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"product-thumbnail__quantity\">{cartItem.quantity}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"product__description\" scope=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"product__description__name\">{cartItem.product_name}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"product__description__variant\"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"product__quantity\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"visually-hidden\">1</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"product__price\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdiscountData.map(item => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(item.discount_code === cartData.discount_code){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(item.applied_all===\"all\"){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst discountValue=Math.abs((item.discount_value/100)*100).toFixed(2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst totalDiscount=parseFloat(cartItem.product_price*discountValue/100)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdiscountedAmount = parseFloat(cartItem.product_price-totalDiscount)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log(discountValue, totalDiscount, discountedAmount)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if(item.products.includes(cartItem.product_id)){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(item.products)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst discountValue=Math.abs((item.discount_value/100)*100).toFixed(2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst totalDiscount=parseFloat(cartItem.product_price*discountValue/100)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdiscountedAmount = parseFloat(cartItem.product_price-totalDiscount)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log(discountValue, totalDiscount, discountedAmount)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// if(discountedAmount>0) \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t<span className=\"order-summary__emphasis__strike\">${parseInt(cartItem.product_price)*parseInt(cartItem.quantity)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t<span className=\"order-summary__emphasis\">${cartItem.discounted_price}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t</>)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// <span className=\"order-summary__emphasis\">${parseInt(cartItem.product_price)*parseInt(cartItem.quantity)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"Nothing\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{discountedAmount > 0 ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"order-summary__emphasis__strike\">${parseInt(cartItem.product_price)*parseInt(cartItem.quantity)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"order-summary__emphasis\">${parseFloat(discountedAmount)*parseFloat(cartItem.quantity)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"order-summary__emphasis\">${parseFloat(cartItem.product_price*cartItem.quantity)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr> \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t    </tbody>\n\t\t\t\t\t\t                    \t</table>\n\t\t\t\t\t\t                    </div>\n\t\t\t\t\t\t                    <p className=\"no-margin evenly-align mt-20\">\n\t\t\t\t\t\t                        <span className=\"cart-total-quantity\">{cartData.total_item} items</span>\n\t\t\t\t\t\t                        <span className=\"cart-total-price\">\n\t\t\t\t\t\t                        \t<span>${cartData.total_amount}</span>\n\t\t\t\t\t\t                        </span>\n\t\t\t\t\t\t                    </p>\n\t\t\t\t\t\t                    <div className=\"cart-subtotal evenly-align cart__total\">\n\t\t\t\t\t\t                        <span className=\"cart-subtotal__title\">Discount</span>\n\t\t\t\t\t\t                        <strong><span className=\"cart-subtotal__price\">-${cartData.discounted_amount}</span></strong>\n\t\t\t\t\t\t                    </div>\n\t\t\t\t\t\t                  \t<div className=\"cart-subtotal evenly-align cart__total\">\n\t\t\t\t\t\t                        <span className=\"cart-subtotal__title\">Subtotal</span>\n\t\t\t\t\t\t                        <strong><span className=\"cart-subtotal__price\">${(parseFloat(cartData.total_amount)-parseFloat(cartData.discounted_amount)).toFixed(2)}</span></strong>\n\t\t\t\t\t\t                    </div>\n\t\t\t\t\t\t                    <div className=\"cart__total evenly-align separator\">\n\t\t\t\t\t\t                        <span className=\"cart__total-text\">Total:</span>  \n\t\t\t\t\t\t                        <strong className=\"cart__total-price text-lg\">\n\t\t\t\t\t\t                        \t<span>{(parseFloat(cartData.total_amount)-parseFloat(cartData.discounted_amount)).toFixed(2)}</span>\n\t\t\t\t\t\t                        \t<span> USD</span>\n\t\t\t\t\t\t                        </strong>\n\t\t\t\t\t\t                    </div>\n\t\t\t\t\t\t                </div>\n\t\t\t\t\t\t\t\t  \t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n    )\n}"]},"metadata":{},"sourceType":"module"}